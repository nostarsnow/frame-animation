(function(e){function t(t){for(var r,a,s=t[0],c=t[1],l=t[2],u=0,f=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},i={app:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-5a47778b":"ca85cf9e"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-5a47778b":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-5a47778b":"922fd10f"}[e]+".css",i=c.p+r,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var l=o[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===i))return t()}var f=document.getElementsByTagName("style");for(s=0;s<f.length;s++){l=f[s],u=l.getAttribute("data-href");if(u===r||u===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[e],p.parentNode.removeChild(p),n(o)},p.href=i;var d=document.getElementsByTagName("head")[0];d.appendChild(p)})).then((function(){a[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(e);var f=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(p);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",f.name="ChunkLoadError",f.type=r,f.request=a,n[1](f)}i[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="https://static.zuhaowan.com/static/zhwfe/static/nostar/frame-animation/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var f=0;f<l.length;f++)t(l[f]);var p=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0819":function(e,t,n){"use strict";var r=n("f0a0"),a=n.n(r);a.a},1:function(e,t){},2:function(e,t){},3:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e18c"),n("96db"),n("af86"),n("f1a9"),n("a2c8"),n("2984");var r=n("6784"),a=n.n(r),i=(n("26fe"),n("7c18")),o=n.n(i),s=(n("4f55"),n("c944")),c=n.n(s),l=(n("b764"),n("77bb")),u=n.n(l),f=(n("3dca"),n("25f9")),p=n.n(f),d=(n("7dc0"),n("041b")),m=n.n(d),h=(n("d06c"),n("7763")),g=n.n(h),v=(n("32de"),n("8d99")),b=n.n(v),w=(n("a68a"),n("230e")),y=n.n(w),x=(n("dc0a"),n("679e")),_=n.n(x),C=(n("4644"),n("7668")),k=n.n(C),S=(n("e8bd"),n("3f00")),$=n.n(S),T=(n("a133"),n("ed0d"),n("f09c"),n("e117"),n("a593")),O=n("9306"),j=n.n(O),A=n("1b53"),L=n.n(A);L.a.registerLanguage("xml",n("e44b")),L.a.registerLanguage("css",n("ddc5")),L.a.registerLanguage("javascript",n("bffc"));var E={install:function(e){e.directive("highlightjs",{deep:!0,bind:function(e,t){var n,r,a=e.querySelectorAll("code");for(r=0;r<a.length;r+=1)n=a[r],"string"===typeof t.value&&(n.textContent=t.value),L.a.highlightBlock(n)},componentUpdated:function(e,t){var n,r,a=e.querySelectorAll("code");for(r=0;r<a.length;r+=1)n=a[r],"string"===typeof t.value&&(n.textContent=t.value,L.a.highlightBlock(n))}})}},P=E,F=(n("5233"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app",attrs:{id:"app"}},[n("Index")],1)}),I=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index"},[n("h1",[e._v("ns frame by frame animation - 逐帧动画生成器")]),e._m(0),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"200px"}},[n("el-form-item",{attrs:{label:"请选择图片类型："}},[n("el-radio-group",{on:{change:e.typeChange},model:{value:e.sourceType,callback:function(t){e.sourceType=t},expression:"sourceType"}},[n("el-radio",{attrs:{label:"png"}},[e._v("png文件夹")]),n("el-radio",{attrs:{label:"gif"}},[e._v("gif图片")])],1)],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"png"===e.sourceType,expression:"sourceType === 'png'"}],attrs:{label:"请选择png文件夹："}},[n("div",{staticClass:"upload-box upload-png"},[n("input",{ref:"uploadPng",attrs:{type:"file",webkitdirectory:""}}),n("div",{staticClass:"text"},[n("el-button",{attrs:{type:"primary",circle:"",icon:"el-icon-upload"}}),n("span",{staticClass:"tip"},[e.form.files.length>0?n("span",[e._v(" 已选 "),n("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e.form.files.length)+" 张png图片")])],1):n("span",[e._v("请选择包含所有帧图片的文件夹。")])])],1),n("div",{staticClass:"text"},[n("span",{staticClass:"tip"},[e._v("自动排序方式为png图片名称过滤非数字字符后正序")])])])]),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"gif"===e.sourceType,expression:"sourceType === 'gif'"}],attrs:{label:"请选择gif文件："}},[n("div",{staticClass:"upload-box upload-gif"},[n("input",{ref:"uploadGif",attrs:{type:"file",accept:"image/gif"}}),n("div",{staticClass:"text"},[n("el-button",{attrs:{type:"primary",circle:"",icon:"el-icon-upload2"}}),n("span",{staticClass:"tip"},[e.form.files.length>0?n("span",[e._v(" "+e._s(e.gifValue)+"。已选 "),n("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e.form.files.length)+" 帧")])],1):n("span",[e._v("请选择gif图片。")])])],1)])]),n("el-form-item",{attrs:{label:"雪碧图每行个数："}},[n("el-tag",{staticClass:"min",on:{click:e.min}},[e._v("最小")]),n("el-input-number",{attrs:{size:"mini",min:1,disabled:e.colDisabled},model:{value:e.form.col,callback:function(t){e.$set(e.form,"col",t)},expression:"form.col"}}),n("el-tag",{staticClass:"max",on:{click:e.max}},[e._v("最大")]),e.form.files.length?n("span",{staticClass:"tip"},[e._v(" 共生成"+e._s(e.rows)+"行"+e._s(e.cols)+"列 ")]):e._e()],1),n("el-form-item",{attrs:{label:"动画帧数："}},[n("el-input-number",{attrs:{size:"mini",min:1},model:{value:e.form.frame,callback:function(t){e.$set(e.form,"frame",t)},expression:"form.frame"}}),n("el-tooltip",{staticStyle:{margin:"0 5px"},attrs:{content:"每秒多少帧/张图片。数字越小动画效果越差。问UI",placement:"top"}},[n("i",{staticClass:"el-icon-question"})]),e.form.files.length?n("span",{staticClass:"tip"},[e._v(" 动画时间约为"+e._s(e.duration)+"毫秒 ")]):e._e()],1),n("el-form-item",{attrs:{label:"渲染方式："}},[n("el-radio-group",{on:{change:e.renderTypeChange},model:{value:e.form.renderType,callback:function(t){e.$set(e.form,"renderType",t)},expression:"form.renderType"}},[n("el-radio",{attrs:{label:"css"}},[e._v("css")]),n("el-radio",{attrs:{label:"js"}},[e._v("js")]),n("el-radio",{attrs:{label:"canvas"}},[e._v("canvas")])],1)],1),n("el-form-item",{attrs:{label:"渲染单位："}},[n("el-radio-group",{model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}},[n("el-radio",{attrs:{label:"px"}},[e._v("px")]),n("el-radio",{attrs:{label:"rem",disabled:"canvas"==e.form.renderType}},[e._v("rem")])],1),"rem"===e.form.unit?n("span",{staticClass:"rem-box"},[n("el-input",{attrs:{size:"mini"},on:{change:e.rem2pxChange},model:{value:e.form.rem2px,callback:function(t){e.$set(e.form,"rem2px",t)},expression:"form.rem2px"}},[n("template",{slot:"prepend"},[e._v("1rem =")]),n("template",{slot:"append"},[e._v("px")])],2)],1):e._e()],1),n("el-form-item",{attrs:{label:"循环播放："}},[n("div",[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.loop,callback:function(t){e.$set(e.form,"loop",t)},expression:"form.loop"}}),n("el-tooltip",{staticStyle:{margin:"0 10px 0 5px"},attrs:{content:"播放只有1次和无数次",placement:"top"}},[n("i",{staticClass:"el-icon-question"})]),e.form.files.length>0?n("el-button",{staticClass:"show-view",on:{click:function(t){e.isShowModal=!0}}},[e._v("查看所有的帧图片")]):e._e()],1)]),n("el-form-item",{staticClass:"el-form-btn"},[n("el-button",{style:{width:"300px",marginTop:"10px"},attrs:{type:e.loading?"info":"primary",loading:e.loading},on:{click:e.onSubmit}},[e._v(e._s(e.loading?"正在生成...":"立即生成"))])],1)],1),e.result.html?n("div",{staticClass:"result"},[n("hr"),n("div",{staticClass:"img"},[n("div",{staticClass:"l"},[n("img",{attrs:{src:e.result.image},on:{click:e.onSave}})]),n("div",{staticClass:"r"},[n("p",[e._v("图片名称："+e._s(e.result.filename))]),n("p",[e._v("图片大小：约"+e._s(e.result.fileSize)+"KB")]),n("p",[e._v("图片尺寸："+e._s(e.result.rect[e.result.unit].fullWidth)+e._s(e.result.unit)+" × "+e._s(e.result.rect[e.result.unit].fullHeight)+e._s(e.result.unit))]),n("p",[e._v(" 图片行列："+e._s(e.result.rows)+"行"+e._s(e.result.cols)+"列，共"+e._s(e.result.files.length)+"帧 ")]),n("p",[e._v("每秒帧数："+e._s(e.result.frame))]),n("p",[e._v("每帧尺寸："+e._s(e.result.rect[e.result.unit].width)+e._s(e.result.unit)+" × "+e._s(e.result.rect[e.result.unit].height)+e._s(e.result.unit))]),n("p",[e._v("动画时长："+e._s(e.result.duration)+"毫秒")]),n("p",[e._v("是否循环："+e._s(e.result.loop?"循环播放":"播放一次"))]),n("div",{staticClass:"save-box"},[n("el-tooltip",{attrs:{content:"如果图片太大点击按钮无法保存，请自行在左侧图片区域右击另存为，然后改名",placement:"top"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.onSave}},[e._v("保存图片")])],1),n("a",{attrs:{href:"https://tinypng.com/",target:"_blank"}},[e._v("压缩图片")])],1)])]),n("CodeView",{attrs:{code:e.result.html}}),n("div",{staticClass:"iframe"},[n("h3",[e._v("预览：")]),n("iframe",{ref:"iframe",attrs:{src:"about:blank",width:e.result.rect.px.width+"px",height:e.result.rect.px.height+"px"}})])],1):e._e(),e.isShowModal?n("FrameModal",{attrs:{files:e.form.files},on:{close:function(t){e.isShowModal=!1}}}):e._e()],1)},D=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[e._v("推荐使用chrome及同内核浏览器访问 "),n("iframe",{attrs:{src:"https://ghbtns.com/github-btn.html?user=nostarsnow&repo=frame-animation&type=star&count=true&size=large&v=2",frameborder:"0",scrolling:"0",width:"160px",height:"30px"}})])}],M=(n("b4fb"),n("dbb3"),n("fe59"),n("2eeb"),n("053b"),n("20a5"),n("e35a"),n("5e9f"),n("0d7a"),n("08ba"),n("5412")),R=n.n(M),q=(n("6a61"),n("cf7f")),N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"code-view"},[n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.formatCode,expression:"formatCode"}]},[n("code",{staticClass:"html"})]),n("div",{staticClass:"icons"},[n("el-tooltip",{attrs:{content:e.copyed?"复制成功！":"复制代码"}},[n("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.formatCode,expression:"formatCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],staticClass:"copy el-icon-document-copy",attrs:{type:"copy"}})]),e.showDownload?n("el-tooltip",{attrs:{content:"下载代码"}},[n("i",{staticClass:"download el-icon-download",attrs:{type:"download"},on:{click:e.download}})]):e._e()],1)])},U=[],z={name:"code-view",props:{code:{},showDownload:{default:function(){return!0}}},data:function(){return{copyed:!1}},methods:{onCopy:function(){var e=this;this.copyed=!0,setTimeout((function(){e.copyed=!1}),3e3)},download:function(){this.$download(this.formatCode,"index.html",!0)}},computed:{formatCode:function(){return this.code}}},H=z,W=(n("f4a6"),n("9ca4")),G=Object(W["a"])(H,N,U,!1,null,"936e06ec",null),J=G.exports,V=n("5d36").MultiRange,K=n("3ea1"),Q=n("0e81");function X(e,t){return e=e||{},t=t||function(){},new Promise((function(t,n){var r=e.url;if(r){var a=e.frames;if(a||0===a){var i=e.outputType||"jpg",o=e.quality,s=e.cumulative,c="all"===a?"all":new V(a),l="undefined"===typeof window?"image/gif":".GIF";K(r,l,(function(e,r,a){if(e)n(e);else if(r.shape.length<4)n(new Error('"url" input should be multi-frame GIF.'));else{for(var l=[],u=0,f=0;f<r.shape[0];f++)("all"===c||c.has(f))&&function(e){l.push({getImage:function(){if(s&&e>u){for(var t=r.pick(u),n=u+1;n<=e;n++){for(var a=r.pick(n),c=0;c<a.shape[0];c++)for(var l=0;l<a.shape[1];l++)0===a.get(c,l,3)&&(a.set(c,l,0,t.get(c,l,0)),a.set(c,l,1,t.get(c,l,1)),a.set(c,l,2,t.get(c,l,2)),a.set(c,l,3,t.get(c,l,3)));t=a}u=e}return Q(r.pick(e),i,{quality:o})},frameIndex:e,frameInfo:a&&a[e]})}(f);t(l)}}))}else n(new Error('"frames" option is required.'))}else n(new Error('"url" option is required.'))}))}var Y={css:function(e){var t=e.rect[e.unit];return"<style>\n.".concat(e.name,"{\n  width: ").concat(t.width).concat(e.unit,";\n  height: ").concat(t.height).concat(e.unit,";\n  background: url(./").concat(e.filename,") no-repeat 0 0;\n  background-size: ").concat(t.fullWidth).concat(e.unit," ").concat(t.fullHeight).concat(e.unit,";\n  animation: key-").concat(e.name," ").concat(e.duration,"ms ").concat(e.loop?"infinite ":"","steps(").concat(e.files.length,");\n}\n@keyframes key-").concat(e.name," {\n  0%{\n    background-position: 0 0;\n  }\n  100%{\n    background-position: ").concat(1===e.rows?"-".concat(t.fullWidth).concat(e.unit," 0"):"0 -".concat(t.fullHeight).concat(e.unit),';\n  }\n}\n</style>\n<div class="').concat(e.name,'"></div>')},js:function(e){var t=e.rect[e.unit];return'<div class="'.concat(e.name,'" data-src="./').concat(e.filename,"\"></div>\n<script>\n  function nsFrameAnimationByJs(options){\n    var $box = options.box;\n    var src = $box.getAttribute('data-src');\n    var img = new Image();\n    img.src = src;\n    var width = options.width;\n    var height = options.height;\n    img.onload = function(){\n      $box.style.backgroundImage = 'url(' + src + ')';\n      $box.style.width = width + options.unit;\n      $box.style.height = height + options.unit;\n      $box.style.backgroundSize = '").concat(t.fullWidth).concat(e.unit," ").concat(t.fullHeight).concat(e.unit,"';\n      frameAnim(0);\n    }\n    function frameAnim(index){\n      var position = (-width * ~~(index%options.cols)) + options.unit + ' ' + (-height * ~~(index/options.cols)) + options.unit;\n      $box.style.backgroundPosition = position;\n      if ( ++index < options.framesLength ){\n        setTimeout(function(){\n          frameAnim(index)\n        }, 1000/options.framesOnSecond)\n      }else{\n        if ( options.loop ){\n          setTimeout(function(){\n            frameAnim(0)\n          }, 1000/options.framesOnSecond)\n        }\n      }\n    }\n  }\n  nsFrameAnimationByJs({\n    box: document.querySelector('.").concat(e.name,"'),\n    width: ").concat(t.width,",\n    height: ").concat(t.height,",\n    cols: ").concat(e.cols,",\n    framesLength: ").concat(e.files.length,",\n    framesOnSecond: ").concat(e.frame,",\n    loop: ").concat(e.loop,",\n    unit: '").concat(e.unit,"'\n  })\n<\/script>")},canvas:function(e){var t=e.rect[e.unit];return'<div class="'.concat(e.name,'" data-src="./').concat(e.filename,"\"></div>\n<script>\n  function nsFrameAnimationByCanvas(options){\n    var $box = options.box;\n    var src = $box.getAttribute('data-src');\n    var img = new Image();\n    img.src = src;\n    var width = options.width;\n    var height = options.height;\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    img.onload = function(){\n      $box.style.width = width + options.unit;\n      $box.style.height = height + options.unit;\n      canvas.width = width;\n      canvas.height = height;\n      $box.appendChild(canvas);\n      frameAnim(0);\n    }\n    function frameAnim(index){\n      ctx.clearRect(0, 0, width, height);\n      ctx.drawImage(img,width * ~~(index%options.cols),height * ~~(index/options.cols),\n      width, height, 0, 0, width, height);\n      if ( ++index < options.framesLength ){\n        setTimeout(function(){\n          frameAnim(index)\n        }, 1000/options.framesOnSecond)\n      }else{\n        if ( options.loop ){\n          setTimeout(function(){\n            frameAnim(0)\n          }, 1000/options.framesOnSecond)\n        }\n      }\n    }\n  }\n  nsFrameAnimationByCanvas({\n    box: document.querySelector('.").concat(e.name,"'),\n    width: ").concat(t.width,",\n    height: ").concat(t.height,",\n    cols: ").concat(e.cols,",\n    framesLength: ").concat(e.files.length,",\n    framesOnSecond: ").concat(e.frame,",\n    loop: ").concat(e.loop,"\n  })\n<\/script>")}},Z=function(e,t){return Y[e].call(null,t)},ee={name:"ns-frame-animation",data:function(){var e={files:[],col:7,renderType:"css",frame:25,loop:!0,unit:"px",rem2px:"100"};return{form:e,formStr:JSON.stringify(e),colDisabled:!1,sourceType:"png",gifValue:"",loading:!1,isShowModal:!1,result:{}}},mounted:function(){this.initUpload()},methods:{onSubmit:function(){var e=this;return Object(q["a"])(R.a.mark((function t(){var n;return R.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.form,!(n.files.length<1)){t.next=4;break}return"png"===e.sourceType?e.$notify.error("请选择png文件夹并保证文件夹下存在png图片！"):e.$notify.error("请选择gif图片！"),t.abrupt("return",!1);case 4:if(e.loading=!0,e.generate(e.form.files),6!==e.result.image.length){t.next=11;break}return e.$notify.error({message:"生成失败！最终图片宽高度(".concat(e.result.fullWidth,"*").concat(e.result.fullHeight,")大于浏览器最大限制16380*16380，请更换渲染方式或每行个数调整后再重新生成！"),duration:1e4}),e.loading=!1,e.result={},t.abrupt("return");case 11:e.$notify.success("生成成功！"),e.loading=!1,e.$nextTick((function(){var t="rem"===e.result.unit?"".concat(e.result.rem2px,"px"):"14px";e.$refs.iframe.contentWindow.document.querySelector("head").innerHTML="",e.$refs.iframe.contentWindow.document.body.innerHTML="",e.$refs.iframe.contentWindow.document.write("<style>*{padding:0;margin:0;}html{font-size:".concat(t,"}</style>")+e.result.html.replace("./".concat(e.result.filename),e.result.image))}));case 14:case"end":return t.stop()}}),t)})))()},formatPng:function(e){var t=this;return Object(q["a"])(R.a.mark((function n(){return R.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(e.map(function(){var e=Object(q["a"])(R.a.mark((function e(n){var r,a;return R.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getFileClientRect(n);case 2:return r=e.sent,e.next=5,t.getFileBase64(n);case 5:return a=e.sent,e.abrupt("return",{name:n.name,img:r,width:r.width,height:r.height,data:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},formatGif:function(e){var t=this;return Object(q["a"])(R.a.mark((function n(){var r;return R.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getFileBase64(e);case 2:return r=n.sent,n.abrupt("return",new Promise((function(e){X({url:r,frames:"all",outputType:"canvas",cumulative:!0}).then(function(){var n=Object(q["a"])(R.a.mark((function n(r){return R.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.t0=e,n.t1=~~(100/r[0].frameInfo.delay),n.next=4,Promise.all(r.map(function(){var e=Object(q["a"])(R.a.mark((function e(n,r){var a,i;return R.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.getImage().toDataURL(),e.next=3,t.getBase64ClientRect(a);case 3:return i=e.sent,e.abrupt("return",{name:r+1,img:i,width:i.width,height:i.height,data:a});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 4:n.t2=n.sent,n.t3={frame:n.t1,files:n.t2},(0,n.t0)(n.t3);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch(console.error.bind(console))})));case 4:case"end":return n.stop()}}),n)})))()},getFileClientRect:function(e){return new Promise((function(t){var n=new Image;n.src=URL.createObjectURL(e),n.onload=function(e){t(n)}}))},getBase64ClientRect:function(e){return new Promise((function(t){var n=new Image;n.src=e,n.onload=function(e){t(n)}}))},getFileBase64:function(e){return new Promise((function(t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){t(e.target.result)}}))},typeChange:function(){this.form=JSON.parse(this.formStr),this.colDisabled=!1,this.isShowModal=!1},renderTypeChange:function(){this.uploaded()},initUpload:function(){var e=this,t=this.$refs.uploadGif,n=this.$refs.uploadPng;t.addEventListener("change",function(){var t=Object(q["a"])(R.a.mark((function t(n){var r,a;return R.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(/\.gif$/i.test(this.value)){t.next=3;break}return e.$msg.error("请上传正确的gif图片！"),t.abrupt("return");case 3:return e.gifValue=this.value,r=n.target.files[0],t.next=7,e.formatGif(r);case 7:a=t.sent,e.form.frame=a.frame,e.form.files=a.files,e.uploaded(),this.value="";case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()),n.addEventListener("change",function(){var t=Object(q["a"])(R.a.mark((function t(n){var r;return R.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[].filter.call(n.target.files,(function(e){return/\.png/.test(e.name)})).sort((function(e,t){var n=+e.name.replace(/\D/g,""),r=+t.name.replace(/\D/g,"");return n-r})),t.next=3,e.formatPng(r);case 3:e.form.files=t.sent,e.uploaded(),this.value="";case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}())},uploaded:function(){var e=this.form,t=e.col,n=e.files,r=e.renderType;t>n.length&&(t=n.length),"css"===r?(this.form.col=n.length,this.colDisabled=!0):this.colDisabled=!1,"canvas"===r&&(this.form.unit="px"),this.isShowModal=!1},min:function(){this.form.col=1},max:function(){this.form.col=this.form.files.length},generate:function(e){var t=this.form,n=this.cols,r=this.rows,a=this.duration,i=t.col,o=t.frame,s=t.loop,c=t.renderType,l=t.unit,u=t.rem2px,f=e[0],p=f.width,d=f.height,m=document.createElement("canvas"),h=p*n,g=d*r;m.setAttribute("width",h),m.setAttribute("height",g),m.style.width=h+"px",m.style.height=g+"px";var v=m.getContext("2d");e.forEach((function(e,t){v.drawImage(e.img,p*~~(t%i),d*~~(t/i),p,d)}));var b=m.toDataURL(),w="ns-frame-".concat(String(+new Date).substr(6)),y={px:{fullWidth:h,fullHeight:g,width:p,height:d,unit:l},rem:{fullWidth:(h/u).toFixed(4),fullHeight:(g/u).toFixed(4),width:(p/u).toFixed(4),height:(d/u).toFixed(4),unit:l}},x={image:b,name:w,filename:"".concat(w,".png"),fileSize:(window.atob(b.split(",")[1]).length/1024).toFixed(2),rect:y,unit:l,rem2px:u,rows:r,cols:n,files:e,frame:o,loop:s,renderType:c,duration:a};x.html=Z(x.renderType,x),this.result=x},onSave:function(){var e=this.result,t=e.filename,n=e.image;this.$download(n,t),this.$notify.success("保存成功！")},rem2pxChange:function(){var e=this.form.rem2px;e=e.replace(/\D/g,""),this.form.rem2px=e?+e<1?1:e:1}},computed:{rows:function(){return~~(this.form.files.length/this.form.col)+ +!!~~(this.form.files.length%this.form.col)},cols:function(){return this.form.col},duration:function(){return(this.form.files.length/this.form.frame*1e3).toFixed(2)}},components:{CodeView:J,FrameModal:function(){return n.e("chunk-5a47778b").then(n.bind(null,"c85f"))}}},te=ee,ne=te,re=(n("0819"),Object(W["a"])(ne,B,D,!1,null,null,null)),ae=re.exports,ie={components:{Index:ae}},oe=ie,se=Object(W["a"])(oe,F,I,!1,null,null,null),ce=se.exports;T["default"].use(j.a),T["default"].use(P),T["default"].config.productionTip=!1,T["default"].useAll=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,a=t;r<a.length;r++){var i=a[r];T["default"].use(i)}};var le=T["default"].prototype;T["default"].useAll($.a,k.a,_.a,y.a,b.a,g.a,m.a,p.a,u.a,c.a),le.$msg=o.a,le.$notify=a.a,T["default"].prototype.$download=function(e,t,n){var r=document.createElement("a");if(r.download=t,n){var a=new Blob([e]);r.href=window.URL.createObjectURL(a)}else r.href=e;r.click()},new T["default"]({render:function(e){return e(ce)}}).$mount("#app")},d0c7:function(e,t,n){},f0a0:function(e,t,n){},f4a6:function(e,t,n){"use strict";var r=n("d0c7"),a=n.n(r);a.a}});